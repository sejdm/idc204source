---
title: "Turing machine example: Shifting"
---

We will now look at states in a more intricate way and, in the process, work out another example.

**Example:** Shift a string to a position marked after the symbol `#`.

We repeat these steps: remember the character under the head, sweep right until we find the `#` symbol, then find the first blank character, and print the remembered character there, and then sweep back, first searching for the `#` and then for the blank character and then move right.

This time, let us separate whatever we need to remember from the steps:

We need to remember at most one piece of information, i.e. the character under the head. There are only two possible characters that need to be remembered, 0, or 1, and of course you may need to remember nothing. So the "memory" can have three states, 0, 1, or Nothing. Denote $M :=\{$ 0, 1, Nothing $\}$.

The distinct steps are as follows:

s0: Remember the character under the head.  
s1: Search for the `#` toward the right  
s2: Search for the first blank character and print the remembered character  
s3: Print the remembered character
s4: Search for the `#` toward the left  

Denote, $S := \{$ s0, s1, s2, s3, s4 $\}$.

We can imagine our states to be a combination of the memory, and the steps:
$Q := M \times S$. Actually, we need only a subset of it because some combinations are never required.

We begin with a blank memory and the first step. We label this $q_0$, i.e. $q_0$ = (Nothing, s0). This step involves marking the character under the head with an X, and moving to the right. But to understand the state change, we note that we shift to step 2, and remember the character under the head, i.e. if the character under the head is a 0, we shift to (0, s1), and if the character under the head is a 1, we shift to (1, s1). Label these combinations $q_1$ and $q_1'$, respectively, and use them to partially define $\delta$:

$$\delta(q_0, x) = \begin{cases}
(q_1,\mathrm{X}, \mathrm{R}) & \text{if } x \text{= 0}\\
(q_1',\mathrm{X}, \mathrm{R}) & \text{if } x \text{= 1}\\
(Accept,x, \mathrm{R}) & \text{otherwise}\\
\end{cases}
$$ 

We have now shifted to step s1, which involves searching for the # character. In other words, until, one sees `#`, leave the character under the head unchanged, and move right. So, as until `#` is in focus, remain in step s1. When `#` is in focus, leave it unchanged, shift right, but then proceed to step s2, but keeping the memory unchanged: 


$$\delta((n, s1), x) = \begin{cases}
((n, s2) ,x, \mathrm{R}) & \text{if } x \text{=} \#\\
((n,s1),x, \mathrm{R}) & \text{otherwise}
\end{cases}
$$ 

Here, $n=0$ or 1, so if we denote $q_2=(0,s2)$ and $q_2'=(1, s2)$, then we can rewrite the above as 

$$\delta(q_1, x) = \begin{cases}
(q_2 ,x, \mathrm{R}) & \text{if } x \text{=} \#\\
(q_1,x, \mathrm{R}) & \text{otherwise}\\
\end{cases}
$$

and 

$$\delta(q_1', x) = \begin{cases}
(q_2' ,x, \mathrm{R}) & \text{if } x \text{=} \#\\
(q_1',x, \mathrm{R}) & \text{otherwise}\\
\end{cases}
$$ 

The step s2 involves searching for the first blank character and writing the remembered character there. So as long as there is no blank character, it shifts right, and leaves everything unchanged. If it finds a blank character, it writes whatever was in memory, clears the memory, and shifts to s3.  We need not remember anything in s3, so we need only use $q_3$=(Nothing, s3). In this notation, 

$$\delta((n,s2), x) = \begin{cases}
((\text{Nothing}, s3),n, \mathrm{R}) & \text{if } x \text{=} .\\
((n, s2),x, \mathrm{R}) & \text{otherwise}\\
\end{cases}
$$ 

and replacing them by their labels,

$$\delta(q_2, x) = \begin{cases}
((\text{Nothing}, s3),0, \mathrm{R}) & \text{if } x \text{=} .\\
(q_2,x, \mathrm{R}) & \text{otherwise}\\
\end{cases}
$$ 

and

$$\delta(q_2', x) = \begin{cases}
((\text{Nothing}, s3),1, \mathrm{R}) & \text{if } x \text{=} .\\
(q_2',x, \mathrm{R}) & \text{otherwise}\\
\end{cases}
$$ 

Now we need not remember anything, so we may denote, $q_3=(\text{Nothing}, \text{s3})$  and $q_4=(\text{Nothing}, \text{s4})$

Since s3 involves searching for `#` while shifting left,


$$\delta(q_3, x) = \begin{cases}
(q_4 ,x, \mathrm{L}) & \text{if } x \text{=} \#\\
(q_3,x, \mathrm{L}) & \text{otherwise}\\
\end{cases}
$$

and 
 

$$\delta(q_4, x) = \begin{cases}
(q_0 ,x, \mathrm{R}) & \text{if } x \text{=} .\\
(q_4,x, \mathrm{L}) & \text{otherwise}\\
\end{cases}
$$

The input

|  |0|1|_|# |
|--|-|-|-|-|
| $q_0$|($q_1$, _, R)|($q_1'$, _, R)|(Accept, _, R)|(Accept, #, R) |
| $q_1$|($q_1$, 0, R)|($q_1$, 1, R)|($q_1$, _, R)|($q_2$, #, R) |
| $q_1'$|($q_1'$, 0, R)|($q_1'$, 1, R)|($q_1'$, _, R)|($q_2'$, #, R) |
| $q_2$|($q_2$, 0, R)|($q_2$, 1, R)|($q_3$, 0, L)|($q_2$, #, R) |
| $q_2'$|($q_2'$, 0, R)|($q_2'$, 1, R)|($q_3$, 1, L)|($q_2'$, #, R) |
| $q_3$|($q_3$, 0, L)|($q_3$, 1, L)|($q_3$, _, L)|($q_4$, #, L) |
| $q_4$|($q_4$, 0, L)|($q_4$, 1, L)|($q_0$, _, R)|($q_4$, #, L) |
This is the output

input: 1011#

`: |1| 0  1  1  # ...`    $\delta:$($q_0$, 1) $\to$ ($q_1'$, _, R)    
`:  _ |0| 1  1  # ...`    $\delta:$($q_1'$, 0) $\to$ ($q_1'$, 0, R)    
`:  _  0 |1| 1  # ...`    $\delta:$($q_1'$, 1) $\to$ ($q_1'$, 1, R)    
`:  _  0  1 |1| # ...`    $\delta:$($q_1'$, 1) $\to$ ($q_1'$, 1, R)    
`:  _  0  1  1 |#|...`    $\delta:$($q_1'$, #) $\to$ ($q_2'$, #, R)    
`:  _  0  1  1  # | |...`    $\delta:$($q_2'$, _) $\to$ ($q_3$, 1, L)    
`:  _  0  1  1 |#| 1 ...`    $\delta:$($q_3$, #) $\to$ ($q_4$, #, L)    
`:  _  0  1 |1| #  1 ...`    $\delta:$($q_4$, 1) $\to$ ($q_4$, 1, L)    
`:  _  0 |1| 1  #  1 ...`    $\delta:$($q_4$, 1) $\to$ ($q_4$, 1, L)    
`:  _ |0| 1  1  #  1 ...`    $\delta:$($q_4$, 0) $\to$ ($q_4$, 0, L)    
`: | | 0  1  1  #  1 ...`    $\delta:$($q_4$, _) $\to$ ($q_0$, _, R)    
`:  _ |0| 1  1  #  1 ...`    $\delta:$($q_0$, 0) $\to$ ($q_1$, _, R)    
`:  _  _ |1| 1  #  1 ...`    $\delta:$($q_1$, 1) $\to$ ($q_1$, 1, R)    
`:  _  _  1 |1| #  1 ...`    $\delta:$($q_1$, 1) $\to$ ($q_1$, 1, R)    
`:  _  _  1  1 |#| 1 ...`    $\delta:$($q_1$, #) $\to$ ($q_2$, #, R)    
`:  _  _  1  1  # |1|...`    $\delta:$($q_2$, 1) $\to$ ($q_2$, 1, R)    
`:  _  _  1  1  #  1 | |...`    $\delta:$($q_2$, _) $\to$ ($q_3$, 0, L)    
`:  _  _  1  1  # |1| 0 ...`    $\delta:$($q_3$, 1) $\to$ ($q_3$, 1, L)    
`:  _  _  1  1 |#| 1  0 ...`    $\delta:$($q_3$, #) $\to$ ($q_4$, #, L)    
`:  _  _  1 |1| #  1  0 ...`    $\delta:$($q_4$, 1) $\to$ ($q_4$, 1, L)    
`:  _  _ |1| 1  #  1  0 ...`    $\delta:$($q_4$, 1) $\to$ ($q_4$, 1, L)    
`:  _ | | 1  1  #  1  0 ...`    $\delta:$($q_4$, _) $\to$ ($q_0$, _, R)    
`:  _  _ |1| 1  #  1  0 ...`    $\delta:$($q_0$, 1) $\to$ ($q_1'$, _, R)    
`:  _  _  _ |1| #  1  0 ...`    $\delta:$($q_1'$, 1) $\to$ ($q_1'$, 1, R)    
`:  _  _  _  1 |#| 1  0 ...`    $\delta:$($q_1'$, #) $\to$ ($q_2'$, #, R)    
`:  _  _  _  1  # |1| 0 ...`    $\delta:$($q_2'$, 1) $\to$ ($q_2'$, 1, R)    
`:  _  _  _  1  #  1 |0|...`    $\delta:$($q_2'$, 0) $\to$ ($q_2'$, 0, R)    
`:  _  _  _  1  #  1  0 | |...`    $\delta:$($q_2'$, _) $\to$ ($q_3$, 1, L)    
`:  _  _  _  1  #  1 |0| 1 ...`    $\delta:$($q_3$, 0) $\to$ ($q_3$, 0, L)    
`:  _  _  _  1  # |1| 0  1 ...`    $\delta:$($q_3$, 1) $\to$ ($q_3$, 1, L)    
`:  _  _  _  1 |#| 1  0  1 ...`    $\delta:$($q_3$, #) $\to$ ($q_4$, #, L)    
`:  _  _  _ |1| #  1  0  1 ...`    $\delta:$($q_4$, 1) $\to$ ($q_4$, 1, L)    
`:  _  _ | | 1  #  1  0  1 ...`    $\delta:$($q_4$, _) $\to$ ($q_0$, _, R)    
`:  _  _  _ |1| #  1  0  1 ...`    $\delta:$($q_0$, 1) $\to$ ($q_1'$, _, R)    
`:  _  _  _  _ |#| 1  0  1 ...`    $\delta:$($q_1'$, #) $\to$ ($q_2'$, #, R)    
`:  _  _  _  _  # |1| 0  1 ...`    $\delta:$($q_2'$, 1) $\to$ ($q_2'$, 1, R)    
`:  _  _  _  _  #  1 |0| 1 ...`    $\delta:$($q_2'$, 0) $\to$ ($q_2'$, 0, R)    
`:  _  _  _  _  #  1  0 |1|...`    $\delta:$($q_2'$, 1) $\to$ ($q_2'$, 1, R)    
`:  _  _  _  _  #  1  0  1 | |...`    $\delta:$($q_2'$, _) $\to$ ($q_3$, 1, L)    
`:  _  _  _  _  #  1  0 |1| 1 ...`    $\delta:$($q_3$, 1) $\to$ ($q_3$, 1, L)    
`:  _  _  _  _  #  1 |0| 1  1 ...`    $\delta:$($q_3$, 0) $\to$ ($q_3$, 0, L)    
`:  _  _  _  _  # |1| 0  1  1 ...`    $\delta:$($q_3$, 1) $\to$ ($q_3$, 1, L)    
`:  _  _  _  _ |#| 1  0  1  1 ...`    $\delta:$($q_3$, #) $\to$ ($q_4$, #, L)    
`:  _  _  _ | | #  1  0  1  1 ...`    $\delta:$($q_4$, _) $\to$ ($q_0$, _, R)    
`:  _  _  _  _ |#| 1  0  1  1 ...`    $\delta:$($q_0$, #) $\to$ (Accept, #, R)    
`:  _  _  _  _  # |1| 0  1  1 ...`    Accept    


